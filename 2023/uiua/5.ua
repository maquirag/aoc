# AoC 2023/06 If You Give A Seed A Fertilizer
# TODO
# Hint: the ranges within each rule are all contiguous
# Experimental!
In â† &fras "2023/input/5t.txt"
Parse â† (
  Â°$"_\n\n_"   # sections
  âŠ“(âŠœâ‹•âŠ¸âˆŠ+@0â‡¡10 # seeds
    # rules: [targetlow sourcelow rangesize]
  | âŠœ(â–¡â†¯âˆ_3âŠœâ‹•âŠ¸âˆŠ+@0â‡¡10) Â¬âŠ¸â¦·"\n\n"
    # convert to: [sourcelow sourcehigh offset]
    â‰¡âœâ‰âš(âŠŸâ‚ƒâŠƒ(âŠ¡1|/+â†˜1|/-â‡Œâ†™2))
    â‰¡âš(
      â† # sort, add low and high range
      â—‡âŠ‚âŠ¸(âŠ‚âŠ‚Â¯âˆâŠ™0âŠ¢â—‡âŠ¢)
      â—‡âŠ‚âŸœ(âŠ‚âŠ™âˆ_0âŠ¡1â—‡âŠ£)
    )
  )
) # out: [seeds] [[rules]â‚‡]
# map source to target ? seed [rule]
FindInBin â† +âŸœ(âŠ£â—‡âŠ¡âŠ£âŠšâŠ¢â—‡â‰âŠ¸â‰¤)
Partâ‚     â† /â†§ â‰¡âŒŸğ„ˆâˆ§(ğ„ˆFindInBin) Parse
Partâ‚ In

# Part 2: seeds change to [[seedlow seedrange]]
# In the full data this is 2327072676 values.
Partâ‚‚ â† (
  â†¯âˆ_2 Parse
  /â—‡âŠ‚ â‰¡(â–¡+âŠ™â‡¡Â°âŠŸ) # this is not feasible for full data
  /â†§ â‰¡âŒŸğ„ˆâˆ§(ğ„ˆFindInBin)
)
Partâ‚‚ In
â”Œâ”€â•´test
  T â† &fras "2023/input/5t.txt"
  â¤â¤™â‰ 35 Partâ‚ T
  â¤â¤™â‰ 46 Partâ‚‚ T
â””â”€â•´
